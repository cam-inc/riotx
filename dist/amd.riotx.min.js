define(["riot"],function(t){"use strict";var e="0.9.3";t="default"in t?t["default"]:t;function n(t,e,n){if(t==null){return}var r=-1,o=t.length;while(++r<o){if(e.call(n,t[r],r,t)===false){break}}}var r=n;function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var i=o;var a;var f;function u(){f=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];a=true;for(var t in{toString:null}){a=false}}function s(t,e,n){var r,o=0;if(a==null){u()}for(r in t){if(c(e,t,r,n)===false){break}}if(a){var s=t.constructor,l=!!s&&t===s.prototype;while(r=f[o++]){if((r!=="constructor"||!l&&i(t,r))&&t[r]!==Object.prototype[r]){if(c(e,t,r,n)===false){break}}}}}function c(t,e,n,r){return t.call(r,e[n],n,e)}var l=s;function h(t,e,n){l(t,function(r,o){if(i(t,o)){return e.call(n,t[o],o,t)}})}var p=h;var d=Object.keys||function(t){var e=[];p(t,function(t,n){e.push(n)});return e};var v=d;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var y=Object.getOwnPropertySymbols;var m=Object.prototype.hasOwnProperty;var g=Object.prototype.propertyIsEnumerable;function _(t){if(t===null||t===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(t)}function w(){try{if(!Object.assign){return false}var t=new String("abc");t[5]="de";if(Object.getOwnPropertyNames(t)[0]==="5"){return false}var e={};for(var n=0;n<10;n++){e["_"+String.fromCharCode(n)]=n}var r=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if(r.join("")!=="0123456789"){return false}var o={};"abcdefghijklmnopqrst".split("").forEach(function(t){o[t]=t});if(Object.keys(Object.assign({},o)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(t){return false}}var b=w()?Object.assign:function(t,e){var n=arguments;var r;var o=_(t);var i;for(var a=1;a<arguments.length;a++){r=Object(n[a]);for(var f in r){if(m.call(r,f)){o[f]=r[f]}}if(y){i=y(r);for(var u=0;u<i.length;u++){if(g.call(r,i[u])){o[i[u]]=r[i[u]]}}}}return o};var j=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function O(t,e){return e={exports:{}},t(e,e.exports),e.exports}var x=O(function(t){(function(e){var n=setTimeout;function r(){}function o(t,e){return function(){t.apply(e,arguments)}}function i(t){if(typeof this!=="object"){throw new TypeError("Promises must be constructed via new")}if(typeof t!=="function"){throw new TypeError("not a function")}this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];l(t,this)}function a(t,e){while(t._state===3){t=t._value}if(t._state===0){t._deferreds.push(e);return}t._handled=true;i._immediateFn(function(){var n=t._state===1?e.onFulfilled:e.onRejected;if(n===null){(t._state===1?f:u)(e.promise,t._value);return}var r;try{r=n(t._value)}catch(t){u(e.promise,t);return}f(e.promise,r)})}function f(t,e){try{if(e===t){throw new TypeError("A promise cannot be resolved with itself.")}if(e&&(typeof e==="object"||typeof e==="function")){var n=e.then;if(e instanceof i){t._state=3;t._value=e;s(t);return}else if(typeof n==="function"){l(o(n,e),t);return}}t._state=1;t._value=e;s(t)}catch(e){u(t,e)}}function u(t,e){t._state=2;t._value=e;s(t)}function s(t){if(t._state===2&&t._deferreds.length===0){i._immediateFn(function(){if(!t._handled){i._unhandledRejectionFn(t._value)}})}for(var e=0,n=t._deferreds.length;e<n;e++){a(t,t._deferreds[e])}t._deferreds=null}function c(t,e,n){this.onFulfilled=typeof t==="function"?t:null;this.onRejected=typeof e==="function"?e:null;this.promise=n}function l(t,e){var n=false;try{t(function(t){if(n){return}n=true;f(e,t)},function(t){if(n){return}n=true;u(e,t)})}catch(t){if(n){return}n=true;u(e,t)}}i.prototype["catch"]=function(t){return this.then(null,t)};i.prototype.then=function(t,e){var n=new this.constructor(r);a(this,new c(t,e,n));return n};i.all=function(t){var e=Array.prototype.slice.call(t);return new i(function(t,n){if(e.length===0){return t([])}var r=e.length;function o(i,a){try{if(a&&(typeof a==="object"||typeof a==="function")){var f=a.then;if(typeof f==="function"){f.call(a,function(t){o(i,t)},n);return}}e[i]=a;if(--r===0){t(e)}}catch(t){n(t)}}for(var i=0;i<e.length;i++){o(i,e[i])}})};i.resolve=function(t){if(t&&typeof t==="object"&&t.constructor===i){return t}return new i(function(e){e(t)})};i.reject=function(t){return new i(function(e,n){n(t)})};i.race=function(t){return new i(function(e,n){for(var r=0,o=t.length;r<o;r++){t[r].then(e,n)}})};i._immediateFn=typeof setImmediate==="function"&&function(t){setImmediate(t)}||function(t){n(t,0)};i._unhandledRejectionFn=function t(e){if(typeof console!=="undefined"&&console){console.warn("Possible Unhandled Promise Rejection:",e)}};i._setImmediateFn=function t(e){i._immediateFn=e};i._setUnhandledRejectionFn=function t(e){i._unhandledRejectionFn=e};if("object"!=="undefined"&&t.exports){t.exports=i}else if(!e.Promise){e.Promise=i}})(j)});var P={debug:false,default:"@"};var F=function(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];if(!P.debug){return}t.unshift("[riotx]");try{console.log.apply(console,t)}catch(e){console.log(t)}};var E=function e(n){this.name=n.name;if(!this.name){this.name=P.default;F("Default store name. name="+this.name)}this.state=b({},n.state);this._actions=b({},n.actions);this._mutations=b({},n.mutations);this._getters=b({},n.getters);t.observable(this)};E.prototype.getter=function t(e){var n=[],r=arguments.length-1;while(r-- >0)n[r]=arguments[r+1];F("[getter]",e,n);var o={state:b({},this.state)};return this._getters[e].apply(null,[o].concat(n))};E.prototype.commit=function t(e){var n=this;var o=[],i=arguments.length-1;while(i-- >0)o[i]=arguments[i+1];var a=b({},this.state);F.apply(void 0,["[commit(before)]",e,a].concat(o));var f={getter:function(t){var e=[],r=arguments.length-1;while(r-- >0)e[r]=arguments[r+1];return n.getter.apply(n,[t].concat(e))},state:a};var u=this._mutations[e].apply(null,[f].concat(o));F.apply(void 0,["[commit(after)]",e,a].concat(o));b(this.state,a);r(u,function(t){n.trigger(t,n.state,n)})};E.prototype.action=function t(e){var n=this;var r=[],o=arguments.length-1;while(o-- >0)r[o]=arguments[o+1];F("[action]",e,r);var i={getter:function(t){var e=[],r=arguments.length-1;while(r-- >0)e[r]=arguments[r+1];return n.getter.apply(n,[t].concat(e))},state:b({},this.state),commit:function(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];(r=n).commit.apply(r,t);var r}};return x.resolve().then(function(){return n._actions[e].apply(null,[i].concat(r))})};E.prototype.change=function t(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];(r=this).on.apply(r,e);var r};var k=function n(){this.version=e||"";this.Store=E;this.stores={};t.mixin({init:function(){var t=this;this.on("unmount",function(){t.off("*");r(t._riotx_change_handlers,function(t){t.store.off(t.evtName)});delete t.riotx;delete t._riotx_change_handlers});if(P.debug){this.on("*",function(e){F(e,t)})}},riotx:this,_riotx_change_handlers:[],rxChange:function(t,e){var n=[],r=arguments.length-2;while(r-- >0)n[r]=arguments[r+2];this._riotx_change_handlers.push({store:t,evtName:e});n.unshift(e);t.on.apply(t,n)}})};k.prototype.add=function t(e){if(this.stores[e.name]){throw new Error("The store instance named `"+e.name+"` already exists.")}this.stores[e.name]=e;return this};k.prototype.get=function t(e){if(e===void 0)e=P.default;return this.stores[e]};k.prototype.debug=function t(e){P.debug=!!e;return this};k.prototype.reset=function t(){this.stores={};return this};k.prototype.size=function t(){return v(this.stores).length};var R=new k;return R});