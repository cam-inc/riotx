define(["riot"],function(t){"use strict";var e="0.9.4";t=t&&t.hasOwnProperty("default")?t["default"]:t;function n(t,e,n){if(t==null){return}var r=-1,i=t.length;while(++r<i){if(e.call(n,t[r],r,t)===false){break}}}var r=n;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var o=i;var a;var s;function c(){s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];a=true;for(var t in{toString:null}){a=false}}function f(t,e,n){var r,i=0;if(a==null){c()}for(r in t){if(u(e,t,r,n)===false){break}}if(a){var f=t.constructor,l=!!f&&t===f.prototype;while(r=s[i++]){if((r!=="constructor"||!l&&o(t,r))&&t[r]!==Object.prototype[r]){if(u(e,t,r,n)===false){break}}}}}function u(t,e,n,r){return t.call(r,e[n],n,e)}var l=f;function h(t,e,n){l(t,function(r,i){if(o(t,i)){return e.call(n,t[i],i,t)}})}var p=h;var v=Object.keys||function(t){var e=[];p(t,function(t,n){e.push(n)});return e};var d=v;
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var g=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty;var m=Object.prototype.propertyIsEnumerable;function _(t){if(t===null||t===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(t)}function w(){try{if(!Object.assign){return false}var t=new String("abc");t[5]="de";if(Object.getOwnPropertyNames(t)[0]==="5"){return false}var e={};for(var n=0;n<10;n++){e["_"+String.fromCharCode(n)]=n}var r=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if(r.join("")!=="0123456789"){return false}var i={};"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t});if(Object.keys(Object.assign({},i)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(t){return false}}var b=w()?Object.assign:function(t,e){var n=arguments;var r;var i=_(t);var o;for(var a=1;a<arguments.length;a++){r=Object(n[a]);for(var s in r){if(y.call(r,s)){i[s]=r[s]}}if(g){o=g(r);for(var c=0;c<o.length;c++){if(m.call(r,o[c])){i[o[c]]=r[o[c]]}}}}return i};var j=setTimeout;function O(){}function P(t,e){return function(){t.apply(e,arguments)}}function x(t){if(!(this instanceof x)){throw new TypeError("Promises must be constructed via new")}if(typeof t!=="function"){throw new TypeError("not a function")}this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];T(t,this)}function E(t,e){while(t._state===3){t=t._value}if(t._state===0){t._deferreds.push(e);return}t._handled=true;x._immediateFn(function(){var n=t._state===1?e.onFulfilled:e.onRejected;if(n===null){(t._state===1?N:k)(e.promise,t._value);return}var r;try{r=n(t._value)}catch(t){k(e.promise,t);return}N(e.promise,r)})}function N(t,e){try{if(e===t){throw new TypeError("A promise cannot be resolved with itself.")}if(e&&(typeof e==="object"||typeof e==="function")){var n=e.then;if(e instanceof x){t._state=3;t._value=e;F(t);return}else if(typeof n==="function"){T(P(n,e),t);return}}t._state=1;t._value=e;F(t)}catch(e){k(t,e)}}function k(t,e){t._state=2;t._value=e;F(t)}function F(t){if(t._state===2&&t._deferreds.length===0){x._immediateFn(function(){if(!t._handled){x._unhandledRejectionFn(t._value)}})}for(var e=0,n=t._deferreds.length;e<n;e++){E(t,t._deferreds[e])}t._deferreds=null}function S(t,e,n){this.onFulfilled=typeof t==="function"?t:null;this.onRejected=typeof e==="function"?e:null;this.promise=n}function T(t,e){var n=false;try{t(function(t){if(n){return}n=true;N(e,t)},function(t){if(n){return}n=true;k(e,t)})}catch(t){if(n){return}n=true;k(e,t)}}x.prototype["catch"]=function(t){return this.then(null,t)};x.prototype.then=function(t,e){var n=new this.constructor(O);E(this,new S(t,e,n));return n};x.all=function(t){return new x(function(e,n){if(!t||typeof t.length==="undefined"){throw new TypeError("Promise.all accepts an array")}var r=Array.prototype.slice.call(t);if(r.length===0){return e([])}var i=r.length;function o(t,a){try{if(a&&(typeof a==="object"||typeof a==="function")){var s=a.then;if(typeof s==="function"){s.call(a,function(e){o(t,e)},n);return}}r[t]=a;if(--i===0){e(r)}}catch(t){n(t)}}for(var a=0;a<r.length;a++){o(a,r[a])}})};x.resolve=function(t){if(t&&typeof t==="object"&&t.constructor===x){return t}return new x(function(e){e(t)})};x.reject=function(t){return new x(function(e,n){n(t)})};x.race=function(t){return new x(function(e,n){for(var r=0,i=t.length;r<i;r++){t[r].then(e,n)}})};x._immediateFn=typeof setImmediate==="function"&&function(t){setImmediate(t)}||function(t){j(t,0)};x._unhandledRejectionFn=function t(e){if(typeof console!=="undefined"&&console){console.warn("Possible Unhandled Promise Rejection:",e)}};var B={debug:false,default:"@",changeBindName:"riotxChange",strict:false,logPrefix:"[riotx]"};var R=function(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];if(!B.debug){return}t.unshift(B.logPrefix);try{console.log.apply(console,t)}catch(e){console.log(t)}};var C=function e(n){var r=this;this.name=n.name;if(!this.name){this.name=B.default;R("Default store name. name="+this.name)}this._state=b({},n.state);Object.defineProperty(this,"state",{get:function(){if(B.strict){throw new Error(B.logPrefix+" Direct access get error.")}return r._state},set:function(t){if(B.strict){throw new Error(B.logPrefix+" Direct access set error. "+t)}r._state=t}});this._actions=b({},n.actions);this._mutations=b({},n.mutations);this._getters=b({},n.getters);t.observable(this)};C.prototype.getter=function t(e){var n=[],r=arguments.length-1;while(r-- >0)n[r]=arguments[r+1];R("[getter]",e,n);var i={state:b({},this._state)};return this._getters[e].apply(null,[i].concat(n))};C.prototype.commit=function t(e){var n=this;var i=[],o=arguments.length-1;while(o-- >0)i[o]=arguments[o+1];var a=b({},this._state);R.apply(void 0,["[commit(before)]",e,a].concat(i));var s={getter:function(t){var e=[],r=arguments.length-1;while(r-- >0)e[r]=arguments[r+1];return n.getter.apply(n,[t].concat(e))},state:a};var c=this._mutations[e].apply(null,[s].concat(i));R.apply(void 0,["[commit(after)]",e,a].concat(i));b(this._state,a);r(c,function(t){n.trigger(t,n._state,n)})};C.prototype.action=function t(e){var n=this;var r=[],i=arguments.length-1;while(i-- >0)r[i]=arguments[i+1];R("[action]",e,r);var o={getter:function(t){var e=[],r=arguments.length-1;while(r-- >0)e[r]=arguments[r+1];return n.getter.apply(n,[t].concat(e))},state:b({},this._state),commit:function(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];(r=n).commit.apply(r,t);var r}};return x.resolve().then(function(){return n._actions[e].apply(null,[o].concat(r))})};C.prototype.change=function t(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];(r=this).on.apply(r,e);var r};var I=function n(){this.version=e||"";this.Store=C;this.stores={};var i=function(t,e){var n=[],r=arguments.length-2;while(r-- >0)n[r]=arguments[r+2];this._riotx_change_handlers.push({store:t,evtName:e});n.unshift(e);t.change.apply(t,n)};t.mixin({init:function(){var t=this;this.on("unmount",function(){t.off("*");r(t._riotx_change_handlers,function(t){t.store.off(t.evtName)});delete t.riotx;delete t._riotx_change_handlers;delete t[B.changeBindName]});if(B.debug){this.on("*",function(e){R(e,t)})}this[B.changeBindName]=i},riotx:this,_riotx_change_handlers:[]})};I.prototype.add=function t(e){if(this.stores[e.name]){throw new Error("The store instance named `"+e.name+"` already exists.")}this.stores[e.name]=e;return this};I.prototype.get=function t(e){if(e===void 0)e=B.default;return this.stores[e]};I.prototype.debug=function t(e){B.debug=!!e;return this};I.prototype.setChangeBindName=function t(e){B.changeBindName=e;return this};I.prototype.strict=function t(e){B.debug=!!e;return this};I.prototype.logPrefix=function t(e){B.logPrefix=e;return this};I.prototype.reset=function t(){this.stores={};return this};I.prototype.size=function t(){return d(this.stores).length};var D=new I;return D});